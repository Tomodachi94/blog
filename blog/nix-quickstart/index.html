<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Nix quickstart guide | Tomodachi94's Musings</title><meta name=title content="Nix quickstart guide"><meta name=description content="This guide helps you start quickly with using Nix as a package manager. This guide covers setting up, nix-shell, nix-env -iA, and Home Manager.
Here&rsquo;s a quick way to get started with using Nix as a package manager without diving into the complex internals:
Install Nix with sh <(curl -L https://nixos.org/nix/install) --daemon. Make sure to add that snippet at the end to your shell configuration or you&rsquo;ll have some trouble later."><meta name=keywords content><meta property="og:title" content="Nix quickstart guide"><meta property="og:description" content="This guide helps you start quickly with using Nix as a package manager. This guide covers setting up, nix-shell, nix-env -iA, and Home Manager.
Here&rsquo;s a quick way to get started with using Nix as a package manager without diving into the complex internals:
Install Nix with sh <(curl -L https://nixos.org/nix/install) --daemon. Make sure to add that snippet at the end to your shell configuration or you&rsquo;ll have some trouble later."><meta property="og:type" content="article"><meta property="og:url" content="https://tomodachi94.github.io/blog/nix-quickstart/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-04-17T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-17T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Nix quickstart guide"><meta name=twitter:description content="This guide helps you start quickly with using Nix as a package manager. This guide covers setting up, nix-shell, nix-env -iA, and Home Manager.
Here&rsquo;s a quick way to get started with using Nix as a package manager without diving into the complex internals:
Install Nix with sh <(curl -L https://nixos.org/nix/install) --daemon. Make sure to add that snippet at the end to your shell configuration or you&rsquo;ll have some trouble later."><meta itemprop=name content="Nix quickstart guide"><meta itemprop=description content="This guide helps you start quickly with using Nix as a package manager. This guide covers setting up, nix-shell, nix-env -iA, and Home Manager.
Here&rsquo;s a quick way to get started with using Nix as a package manager without diving into the complex internals:
Install Nix with sh <(curl -L https://nixos.org/nix/install) --daemon. Make sure to add that snippet at the end to your shell configuration or you&rsquo;ll have some trouble later."><meta itemprop=datePublished content="2023-04-17T00:00:00+00:00"><meta itemprop=dateModified content="2023-04-17T00:00:00+00:00"><meta itemprop=wordCount content="579"><meta itemprop=keywords content><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=/ class=title><h2>Tomodachi94's Musings</h2></a><nav><a href=/>Home</a>
<a href=/blog>Blog</a></nav></header><main><h1>Nix quickstart guide</h1><p><i><time datetime=2023-04-17 pubdate>17 Apr, 2023</time></i></p><content><p>This guide helps you start quickly with using Nix as a package manager. This guide covers setting up, <code>nix-shell</code>, <code>nix-env -iA</code>, and Home Manager.</p><p>Here&rsquo;s a quick way to get started with using Nix as a <em>package manager</em> without diving into the complex internals:</p><ul><li>Install Nix with <code>sh &lt;(curl -L https://nixos.org/nix/install) --daemon</code>. Make sure to add that snippet at the end to your shell configuration or you&rsquo;ll have some trouble later.</li><li>Run <code>nix-channel --update</code>. This is pretty much the same as <code>apt-get update</code>.</li><li>Run <code>nix-shell -p cowsay</code>. This downloads <code>cowsay</code> into your <em>Nix Store</em> (at <code>/nix/store</code>) and then modifies your <code>$PATH</code> and other variables to make it executable in your shell. Run <code>cowsay 'Hello Nix!'</code> to test it out; it should behave the same.</li><li>Run <code>nix-env -iA pkgs.cowsay</code> to add <code>cowsay</code> into your path permanently. I don&rsquo;t recommend this method if you use more than a few packages; see later bullet points about Home Manager.</li><li>Side note, if you want to search all of the packages in Nixpkgs, you can use the wonderful interface at <a href=https://search.nixos.org>https://search.nixos.org</a>. Make sure to select to <code>unstable</code> channel in the switcher below the search bar.</li></ul><p>This is pretty much all you need to use Nix, but there are much better ways to ensure packages are installed and automatically put on <code>$PATH</code>. Out of the solutions, I still prefer <a href=https://github.com/nix-community/home-manager>Home Manager</a> (abbreviated to HM).</p><h2 id=home-manager>Home Manager</h2><p>HM is a configuration management system that can also manipulate your <code>$PATH</code> and other things.</p><p>Here&rsquo;s a quick way to start using HM:</p><ul><li>Install HM with <code>nix-channel --add https://github.com/nix-community/home-manager/archive/master.tar.gz home-manager</code>, then update your channels with <code>nix-channel --update</code>. If you see something being &lsquo;built&rsquo;, that is perfectly normal. You&rsquo;ll also need to run <code>nix-shell '&lt;home-manager>' -A install</code> to complete the installation.</li><li>Add <code>. $HOME/.nix-profile/etc/profile.d/hm-session-vars.sh</code> to your <code>.bashrc</code>/<code>.zshrc</code> to ensure binaries are added to the <code>$PATH</code>. Relaunch your shell afterwards.</li><li>You&rsquo;ll need to <code>mkdir ~/.config/home-manager</code>, then run <code>$EDITOR ~/.config/home-manager/home.nix</code>. Add this snippet to start:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nix data-lang=nix><span style=display:flex><span>{ environment<span style=color:#f92672>,</span> config<span style=color:#f92672>,</span> pkgs<span style=color:#f92672>,</span> lib<span style=color:#f92672>,</span> <span style=color:#f92672>...</span> }:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#75715e># Home-Manager needs to know who you are, which is why I use `me` as my username</span>
</span></span><span style=display:flex><span>  home<span style=color:#f92672>.</span>username <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;me&#34;</span>;
</span></span><span style=display:flex><span>  home<span style=color:#f92672>.</span>homeDirectory <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/home/me&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Remove this if you are on Darwin or some non-Linux platform</span>
</span></span><span style=display:flex><span>  targets<span style=color:#f92672>.</span>genericLinux<span style=color:#f92672>.</span>enable <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Here&#39;s the fun part!</span>
</span></span><span style=display:flex><span>  home<span style=color:#f92672>.</span>packages <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>git <span style=color:#75715e># Version control</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>neovim <span style=color:#75715e># Text editor</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>exa <span style=color:#75715e># Better ls</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>fd <span style=color:#75715e># Better find</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>ripgrep <span style=color:#75715e># Better grep</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>fzf <span style=color:#75715e># Better fuzzy finder</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>bat <span style=color:#75715e># Better cat</span>
</span></span><span style=display:flex><span>	pkgs<span style=color:#f92672>.</span>zathura <span style=color:#75715e># PDF reader</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>starship <span style=color:#75715e># Shell prompt</span>
</span></span><span style=display:flex><span>    pkgs<span style=color:#f92672>.</span>atuin <span style=color:#75715e># Better shell history</span>
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>This is all you need to start. I recommend removing some of the packages that I have filled and replace them with some of your own tools that you use on a daily basis.</li><li>Update your HM configuration with <code>home-manager switch</code>. You&rsquo;ll notice some stuff being downloaded and eventually you will return to your shell.</li><li>Try out your new packages!</li><li>There is also a way to configure things with Home Manager; I will cover that in another guide since that is out of scope for this one.</li></ul><h2 id=further-reading>Further reading</h2><p>If Nix seems interesting and you want to learn the internals, I recommend the following resources:</p><ul><li><a href=https://zero-to-nix.com>Zero to Nix</a> is a great resource explaining a lot of Nix concepts. This is my go-to resource for most things Nix.</li><li><a href=https://nixos.org/manual/nixpkgs/stable/>The Nixpkgs manual</a>. I cannot recommend this enough, especially once you want to create your own packages.</li><li>The <a href=https://nix-community.github.io/home-manager/>Home Manager manual</a> for HM-related things.</li><li>Again, the <a href=https://search.nixos.org>Nixpkgs package search</a> for finding packages.</li></ul></content><p></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer><script data-goatcounter=https://tomodachi94.goatcounter.com/count async src=https://gc.zgo.at/count.js></script></body></html>